## 浏览器的渲染机制

### 1. 浏览器的渲染过程？

![render-pic](./images/render.png)

大体流程如下：

1. HTML和CSS经过各自解析器解析，生成DOM树和CSSOM树；
2. 合并成渲染树（Render Tree）；
3. 根据渲染树进行布局；
4. 最后调用GPU进行绘制，显示在屏幕上；

### 2. 如何根据浏览器渲染机制加快首屏速度？

1. **优化文件大小**：HTML和CSS的加载和解析都会阻塞渲染树的生成，从而影响首屏渲染速度，可以通过优化文件大小，减少CSS文件层级的方法来加快首屏速度；
2. **避免资源下载阻塞文档解析**：浏览器解析到<script>标签的时候，会阻塞文档解析，知道脚本执行完成，因此通常把<script>标签放到底部，或者加上defer、async等属性来进行异步加载。

### 3. 回流（重排）和重绘
#### 什么是回流？
当render tree中的一部分或全部因为元素的规模尺寸、布局、隐藏等改变时，浏览器重新渲染部分DOM或者全部DOM的过程，称之为回流，也叫重排。（重新排版整个页面）

### 什么是重绘？
当页面元素样式不改变元素在文档流中的位置的时（如background-color、border-color、visibility），浏览器只会将新样式赋予元素并进行重新绘制操作的过程。
